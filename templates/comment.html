<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Webpage Title -->
    <title>Ï±ÑÎÑê ÏΩîÎ©òÌä∏ | worth_seeing</title>

    <meta property="og:title" content="Î≥ºÎßåÌï¥ - Ïú†ÌäúÎ∏å Ï±ÑÎÑê Ï∂îÏ≤ú"/>
    <meta property="og:description" content="Ïú†ÌäúÎ∏åÏóêÏÑú Ïû¨ÎØ∏ÏûàÍ≤å Î¥§Îçò ÏòÅÏÉÅÏù¥ ÏûàÎã§Î©¥ Í∑∏ Ï±ÑÎÑêÏùÑ Îã§Î•∏ ÏÇ¨ÎûåÍ≥º Í≥µÏú†ÌïòÎ©∞ Í∞ôÏù¥ Ï¶êÍ∏∏ Ïàò ÏûàÎäî Ïõπ ÌéòÏù¥ÏßÄ ÏûÖÎãàÎã§."/>
    <meta property="og:image" content="{{ url_for('static', filename='og.png') }}"/>
    <!--title ÏòÜ ÏïÑÏù¥ÏΩò Î™®Ïñë-->
    <link rel="shortcut icon" href="../static/comment_con.png" type="image/x-icon">
    <link rel="icon" href="../static/comment_con.png" type="image/x-icon">
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!--CSS ÎßÅÌÅ¨-->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- Íµ¨Í∏ÄÌè∞Ìä∏ CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Nanum+Gothic&display=swap" rel="stylesheet">
    <!-- font-family: 'Jua', sans-serif;
    font-family: 'Nanum Gothic', sans-serif; -->

    <!-- <link href="{{ url_for('static', filename='mystyle.css') }}" rel="stylesheet"> -->

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    
    <!-- <script src="{{ url_for('static', filename='myjs.js') }}"></script> -->
    
    <style>
        * {
            font-family: 'Nanum Gothic', sans-serif;
        }

        /*ÏΩîÎ©òÌä∏ Î∞ïÏä§*/
        .comment_box {
            width: 700px;
            height: 600px;

            margin: 50px auto;
            padding: 20px;

            border: 5px solid #41CC93
            
        }

        /*ÏΩîÎ©òÌä∏ ÌéòÏù¥ÏßÄ Ï†ïÎ≥¥*/
        .title {
            width: 800px;
            margin: 20px auto;
        }

        .title > p {
            font-weight: bolder;
            font-size: 50px
        }
        
        /*Ïú†ÌäúÎ∏å ÎπÑÎîîÏò§*/
        .video {
            margin-top: 40px;
        }

        .video_box {
            width: 650px;

            display: flex;
            flex-direction:row;
            justify-content: center;
            align-items: center;
        }

        /*ÎåìÍ∏ÄÏ∞Ω*/

        .section {
            padding: 1rem 1.5rem;
            max-width: 750px;
            margin: auto;
        }
    

    </style>
    <script>
         //ÌéòÏù¥ÏßÄ Î°úÎî©Ïãú ÎûúÎç§ Ïú†Ìä≠ Î∞ïÏä§ Ï∂îÍ∞ÄÏöî!....
         $(document).ready(function(){
            randomVideo();
        });

        function randomVideo() {
            $('#comment_box').empty();

            $.ajax({
                type: "GET",
                url: "/list",
                data: {},
                success: function (response) {
                    let rows = response['youtube_list']
                    let i = Math.floor(Math.random() * rows.length)
                    let title = rows[i]['title']
                    let image = rows[i]['image']
                    let comment = rows[i]['comment']

                    let temp_html = `<div class="tile is-parent tile is-3" id="card_box">
                                    <article class="tile is-child box">
                                    <figure class="image is-256x256" id="image_box">
                                        <img src="${image}">
                                        </figure>
                                    <p class="title is-4">${title}</p>
                                    <p class="subtitle">${comment}</p>
                                    </article>
                                </div>`
                    $('#comment_box').append(temp_html);
                }
            })
        }
        
        function post() {
            let comment = $("#textarea-post").val()
            let today = new Date().toISOString()
            $.ajax({
                type: "POST",
                url: "/posting",
                data: {
                    comment_give: comment,
                    date_give: today
                },
                success: function (response) {
                    $("#modal-post").removeClass("is-active")
                    window.location.reload()
                }
            })
        }

        function time2str(date) {
            let today = new Date()
            let time = (today - date) / 1000 / 60  // Î∂Ñ

            if (time < 60) {
                return parseInt(time) + "Î∂Ñ Ï†Ñ"
            }
            time = time / 60  // ÏãúÍ∞Ñ
            if (time < 24) {
                return parseInt(time) + "ÏãúÍ∞Ñ Ï†Ñ"
            }
            time = time / 24
            if (time < 7) {
                return parseInt(time) + "Ïùº Ï†Ñ"
            }
            return `${date.getFullYear()}ÎÖÑ ${date.getMonth() + 1}Ïõî ${date.getDate()}Ïùº`
        }

        function get_posts() {
            $("#post-box").empty()
            $.ajax({
                type: "GET",
                url: "/get_posts",
                data: {},
                success: function (response) {
                    if (response["result"] == "success") {
                        let posts = response["posts"]
                        for (let i = 0; i < posts.length; i++) {
                            let post = posts[i]
                            let time_post = new Date(post["date"])
                            let time_before = time2str(time_post)
                            let html_temp = `<div class="box" id="${post["_id"]}">
                                        <article class="media">
                                            <div class="media-left">
                                                <a class="image is-64x64" href="/user/${post['username']}">
                                                    <img class="is-rounded" src="/static/${post['profile_pic_real']}"
                                                         alt="Image">
                                                </a>
                                            </div>
                                            <div class="media-content">
                                                <div class="content">
                                                    <p>
                                                        <strong>${post['profile_name']}</strong> <small>@${post['username']}</small> <small>${time_before}</small>
                                                        <br>
                                                        ${post['comment']}
                                                    </p>
                                                </div>
                                            </div>
                                        </article>
                                    </div>`
                            $("#post-box").append(html_temp)
                        }
                    }
                }
            })
        }

        $(document).ready(function () {
            get_posts()
        })
    </script>
</head>
<body >
      <!--ÎÑ§ÎπÑÍ≤åÏù¥ÏÖòÎ∞î-->
 <nav class="navbar-menu is-active">
        <div class="navbar-brand">
            <a class="navbar-item">
            <img src="../static/·Ñê·Ö°·Ñã·Öµ·Ñê·Ö≥·ÜØ ·ÑÖ·Ö©·ÑÄ·Ö©.png" width="100" alt="Î≥ºÎßåÌï¥">
            </a>
        </div>
        <div class="navbar-start">
            <a class="navbar-item" style="font-family: 'Jua', sans-serif;" href="/">
                Ï±ÑÎÑêÎ™®ÏïÑ
            </a>
            <a class="navbar-item" style="font-family: 'Jua', sans-serif;" href="/comment">
                ÎûúÎç§Ï∂îÏ≤ú
            </a>
            <a class="navbar-item" style="font-family: 'Jua', sans-serif;" href="/mypage/{{ user_info.username }}">
                ÎÇòÏùò Ï†ïÎ≥¥
            </a>
            <div class="buttons">
              <a class="button is-primary">
                <strong style="font-family: 'Jua', sans-serif;" onclick="sign_out()">Î°úÍ∑∏ÏïÑÏõÉ ÌïòÍ∏∞</strong>
              </a>
            </div>
        </div>
    </nav>

    
    <!--ÏΩîÎ©òÌä∏ ÌéòÏù¥ÏßÄ Ï†ïÎ≥¥-->
    <div class="title">
        <p>${title} Ï±ÑÎÑê ÏΩîÎ©òÌä∏üí¨</p>
        <p style="font-size: 25px; font-weight: lighter;">ÏùòÍ≤¨ÏùÑ ÏûêÏú†Î°≠Í≤å ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî.</p>
    </div>

    <!--ÏòÅÏÉÅ ÏÜåÍ∞ú Î∞ïÏä§-->
    <div class="comment_box">

            <article class="media">
                <figure class="media-left" style="align-self: center">
                    <a class="image is-96x96">
                        <img class="is-rounded" src="${image}">
                    </a>
                </figure>
                <div class="media-content">
                    <div class="content">
                        <strong>Ï±ÑÎÑêÎ™Ö</strong>
                        <br>
                        Ï±ÑÎÑêÏÜåÍ∞ú
                    </div>
                </div>
            </article>
            <div class="video_box">
                <iframe width="600" height="400" src="https://www.youtube.com/embed/3zPnom6vpZo" title="YouTube video player" frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
                class="video"></iframe>
            </div>
    </div>

    <!--     ÎåìÍ∏ÄÏ∞Ω -->
    <section class="section">
        <article class="media">
            <figure class="media-left" style="align-self: center">
          <a class="image is-32x32" href="/user/{{ user_info.username }}">
              <img src="../static/profile_pics/profile_placeholder.png">
          </a>
            </figure>
            <div class="media-content">
                <div class="field">
                    <p class="control">
                        <input id="input-post" class="input is-rounded" placeholder="Ï±ÑÎÑêÏóê ÎåÄÌïú ÏùòÍ≤¨ÏùÑ ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî!"
                               onclick='$("#modal-post").addClass("is-active")'>
                    </p>
                </div>
            </div>
        </article>
        <div class="modal" id="modal-post">
            <div class="modal-background" onclick='$("#modal-post").removeClass("is-active")'></div>
            <div class="modal-content">
                <div class="box">
                    <article class="media">
                        <div class="media-content">
                            <div class="field">
                                <p class="control">
                                    <textarea id="textarea-post" class="textarea"
                                              placeholder="Ï±ÑÎÑêÏóê ÎåÄÌïú ÏùòÍ≤¨ÏùÑ ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî!"></textarea>
                                </p>
                            </div>
                            <nav class="level is-mobile">
                                <div class="level-left">

                                </div>
                                <div class="level-right">
                                    <div class="level-item">
                                        <a class="button is-sparta" onclick="post()" style="font-family: 'Jua', sans-serif;">Ìè¨Ïä§ÌåÖÌïòÍ∏∞</a>
                                    </div>
                                    <div class="level-item">
                                        <a class="button is-sparta is-outlined"
                                           onclick='$("#modal-post").removeClass("is-active")' style="font-family: 'Jua', sans-serif;">Ï∑®ÏÜå</a>
                                    </div>
                                </div>
                            </nav>
                        </div>
                    </article>
                </div>
            </div>
            <button class="modal-close is-large" aria-label="close"
                    onclick='$("#modal-post").removeClass("is-active")'></button>
        </div>

    </section>

    <section class="section">
        <div id="post-box" class="container">
            <div class="box">
                <article class="media">
                    <div class="media-left">
                        <a class="image is-64x64" href="#">
                            <img src="../static/profile_pics/profile_placeholder.png" alt="Image">
                        </a>
                    </div>
                    <div class="media-content">
                        <div class="content">
                            <p>
                                <strong>ÌôçÍ∏∏Îèô</strong> <small>@username</small> <small>10Î∂Ñ Ï†Ñ</small>
                                <br>
                                Í∏ÄÏùÑ Ï†ÅÎäî Ïπ∏
                            </p>
                        </div>
                        <nav class="level is-mobile">
                            <div class="level-left">
                                <a class="level-item is-sparta" aria-label="heart"
                                   onclick="toggle_like('', 'heart')">
                                    <span class="icon is-small"><i class="fa fa-heart"
                                                                   aria-hidden="true"></i></span>&nbsp;<span
                                        class="like-num">2.7k</span>
                                </a>
                            </div>

                        </nav>
                    </div>
                </article>
            </div>

        </div>
    </section>


</body>
</html>
