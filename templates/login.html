<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Webpage Title -->
    <title> ë³¼ë§Œí•´ ë¡œê·¸ì¸ | worth_seeing</title>

    <meta property="og:title" content="ë³¼ë§Œí•´ - ìœ íŠœë¸Œ ì±„ë„ ì¶”ì²œ"/>
    <meta property="og:description" content="ìœ íŠœë¸Œì—ì„œ ì¬ë¯¸ìˆê²Œ ë´¤ë˜ ì˜ìƒì´ ìˆë‹¤ë©´ ê·¸ ì±„ë„ì„ ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ í•˜ë©° ê°™ì´ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ì›¹ í˜ì´ì§€ ì…ë‹ˆë‹¤."/>
    <meta property="og:image" content="{{ url_for('static', filename='og.png') }}"/>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <script src="https://kit.fontawesome.com/ca4299af83.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Nanum+Gothic&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../static/login.css">

    <script>
         // {% if msg %}
            //     alert("{{ msg }}")
            // {% endif %}
        // ë¡œê·¸ì¸ ì…ë ¥ê°’ì„ ë¶ˆëŸ¬ì™€ì„œ ì„œë²„ì— ajax ìš”ì²­
        // if user_idê°€ ë¹ˆê°’ì´ë©´ id ='help-id-login'ì˜ textë¥¼ ìˆ˜ì •í•¨
        // ê·¸ë¦¬ê³  id='input_id' ìš”ì†Œë¥¼ ì„ íƒ(í´ë¦­)í•˜ê³  return ì‹œí‚´
        // else id ='help-id-login'ë¥¼ ë¹„ì›Œë‘ 
        function sign_in() {
            let user_id = $('#input_id').val()
            let user_pw = $('#input_pw').val()

            if (user_id == "") {
                $('#help-id-login').text("ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                $('#input_id').focus()
                return
            } else {
                $('#help-id-login').text("")
            }
            // 
            if (user_pw == "") {
                $('#help-password-login').text("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                $('#input_pw').focus()
                return
            } else {
                $('#help-password-login').text("")
            }

            // login apiì— post ìš”ì²­ userid,pw ë¥¼ username,password_giveë¡œ ë³´ë‚´ì¤Œ
            // if ì‘ë‹µì˜ ê²°ê³¼ê°€ ì„±ê³µì´ë©´ cookie (KEY, VAULE, {ê²½ë¡œ})ë¥¼ ìƒì„±í•˜ê³ 
            // hrefê°€ ì•„ë‹Œ replaceë¥¼ ì´ìš©í•˜ì—¬ ì´ì „ í˜ì´ì§€ ì´ë™ì€ ë¶ˆê°€ëŠ¥ í•´ì•¼í•¨
            // else ì‘ë‹µ ë©”ì‹œì§€ë¥¼ alret í•´ì¤Œ
            console.log(user_id,user_pw)
                $.ajax({
                    type: "POST",
                    url: "/sign_in",
                    data: {
                        username_give: user_id,
                        password_give: user_pw
                    },
                    success: function (response) {
                        console.log(response)
                        if (response['result'] == 'success') {
                            $.cookie('mytoken', response['token'], {path: '/'});
                            window.location.replace("/")
                        } else {
                            alert(response['msg'])
                            window.location.reload()
                        }
                    }
                });
            }
    </script>
</head>

<body>
    <div class="container">
        <div class="logo_box">  <!-- ìƒë‹¨ ë¡œê³ , ì„¤ëª…-->
            <img class="login_logo" src="../static/1200x360%20ì›¹%20ë¡œê³ .png">
            <h1>ìœ íŠœë¸Œì—ì„œ ì¬ë¯¸ìˆê²Œ ë´¤ë˜ ì˜ìƒì´ ìˆë‹¤ë©´ ê·¸ ì±„ë„ì„ ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ í•˜ë©° ì¦ê¸¸ìˆ˜ ìˆëŠ” ì›¹ í˜ì´ì§€ ì…ë‹ˆë‹¤.</h1>
        </div>
        <div class="login_box">
            <div class="login_function">
                <div class="login_input">
                    <div id="input_id_box" class="control has-icons-left has-icons-right">    <!-- ì•„ì´ë”” ì…ë ¥ -->
                        <input id="input_id" class="input is-large" type="text" placeholder="ì•„ì´ë””">
                        <span class="icon is-medium is-left">
                            <i class="fa-sharp fa-solid fa-circle-user"></i>
                        </span>
                        <span class="icon is-medium is-right">
                            <i class="fas fa-check"></i>
                        </span>
                    </div>
                    <p id="help-id-login" class="help is-danger"></p>   <!-- ì•„ì´ë””ê°€ ì—†ìœ¼ë©´ ê²½ê³  í…ìŠ¤íŠ¸ ë°œìƒ -->
                    <div id="pw_box" class="control has-icons-left has-icons-right">    <!-- ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ -->
                        <input id="input_pw" class="input is-large" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
                        <span class="icon is-medium is-left">
                            <i class="fa-sharp fa-solid fa-lock"></i>
                        </span>
                        <span class="icon is-medium is-right">
                            <i class="fas fa-check"></i>
                        </span>
                    </div>
                    <p id="help-password-login" class="help is-danger"></p> <!-- ë¹„ë°€ë²ˆí˜¸ê°€ ì—†ìœ¼ë©´ ê²½ê³  í…ìŠ¤íŠ¸ ë°œìƒ -->
                </div>
                <button class="login_btn" onclick="sign_in()" class="button is-outlined">ğŸš€ ë¡œê·¸ì¸í•˜ê¸°</button>   <!-- ë¡œê·¸ì¸ ë²„íŠ¼ -->
            </div>
            <div class="login_option">  <!-- íšŒì›ê°€ì…, ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ë²„íŠ¼ -->
                <button class= "signup_btn" onclick=location.href='/sign_up' >íšŒì›ê°€ì…</button>
            </div>
        </div>
    </div>
</body>
</html>